{% extends "base.html" %}

{% block title %}üèÜ Scoreboard - Points Dashboard{% endblock %}

{% block content %}
<style>
    .scoreboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 50px;
        flex-wrap: wrap;
        gap: 20px;
    }

    .scoreboard-title {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 3.2em;
        font-weight: 800;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ff6b6b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        animation: titlePulse 3s ease-in-out infinite;
    }

    @keyframes titlePulse {
        0%, 100% { transform: scale(1); filter: brightness(1); }
        50% { transform: scale(1.05); filter: brightness(1.2); }
    }

    .trophy-icon {
        font-size: 1.3em;
        animation: trophySpin 4s ease-in-out infinite;
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
    }

    @keyframes trophySpin {
        0%, 100% { transform: translateY(0px) rotate(-10deg) scale(1); }
        25% { transform: translateY(-15px) rotate(10deg) scale(1.1); }
        50% { transform: translateY(0px) rotate(-10deg) scale(1); }
        75% { transform: translateY(-10px) rotate(5deg) scale(1.05); }
    }

    .filter-section {
        display: flex;
        align-items: center;
        gap: 15px;
        background: var(--bg-glass);
        padding: 15px 25px;
        border-radius: var(--border-radius-lg);
        border: 2px solid var(--border-glass);
        backdrop-filter: blur(15px);
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .filter-section:hover {
        transform: scale(1.05);
        border-color: rgba(102, 126, 234, 0.5);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    .filter-section label {
        color: var(--text-secondary);
        font-weight: 600;
        margin: 0;
    }

    .filter-section select {
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid var(--border-glass);
        color: var(--text-primary);
        padding: 12px 20px;
        border-radius: var(--border-radius);
        font-size: 1.05em;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        font-weight: 600;
    }

    .filter-section select:hover {
        transform: scale(1.05);
        border-color: rgba(102, 126, 234, 0.6);
    }

    .filter-section select:focus {
        outline: none;
        border-color: rgba(102, 126, 234, 0.8);
        box-shadow: 0 0 25px rgba(102, 126, 234, 0.4);
        transform: scale(1.08);
    }

    .leaderboard-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
    }

    /* TOP 3 PODIUM */
    .podium-section {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 25px;
        margin-bottom: 50px;
        align-items: end;
        perspective: 1000px;
    }

    .podium-card {
        background: var(--bg-glass);
        backdrop-filter: blur(25px);
        border: 2px solid var(--border-glass);
        border-radius: var(--border-radius-lg);
        padding: 35px 25px;
        text-align: center;
        position: relative;
        transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        animation: podiumRise 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        overflow: visible;
        cursor: pointer;
    }

    @keyframes podiumRise {
        from { transform: translateY(100px) rotateX(45deg); opacity: 0; }
        to { transform: translateY(0) rotateX(0deg); opacity: 1; }
    }

    .podium-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--primary);
        border-radius: 5px 5px 0 0;
        animation: rainbowShift 3s linear infinite;
    }

    @keyframes rainbowShift {
        0% { background: linear-gradient(90deg, #667eea, #764ba2); }
        33% { background: linear-gradient(90deg, #f093fb, #f5576c); }
        66% { background: linear-gradient(90deg, #4facfe, #00f2fe); }
        100% { background: linear-gradient(90deg, #667eea, #764ba2); }
    }

    .podium-card:hover {
        transform: translateY(-20px) scale(1.08) rotateZ(2deg);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
        border-color: rgba(255, 255, 255, 0.5);
    }

    .podium-card:active {
        animation: cardBounce 0.5s ease;
    }

    @keyframes cardBounce {
        0%, 100% { transform: translateY(-20px) scale(1.08); }
        50% { transform: translateY(-30px) scale(1.12) rotateZ(-5deg); }
    }

    .podium-card.first {
        order: 2;
        transform: scale(1.15);
        z-index: 3;
    }

    .podium-card.first::before {
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        height: 8px;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    }

    .podium-card.first:hover {
        transform: translateY(-25px) scale(1.25) rotateZ(0deg);
        animation: firstPlaceCelebrate 1s ease-in-out infinite;
    }

    @keyframes firstPlaceCelebrate {
        0%, 100% { box-shadow: 0 30px 60px rgba(255, 215, 0, 0.4); }
        50% { box-shadow: 0 40px 80px rgba(255, 215, 0, 0.6); }
    }

    .podium-card.second {
        order: 1;
        transform: scale(1.08);
        z-index: 2;
    }

    .podium-card.second::before {
        background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
        height: 6px;
    }

    .podium-card.third {
        order: 3;
        transform: scale(1.08);
        z-index: 2;
    }

    .podium-card.third::before {
        background: linear-gradient(135deg, #cd7f32, #daa520);
        height: 6px;
    }

    .podium-rank {
        font-size: 3.5em;
        font-weight: 900;
        margin-bottom: 15px;
        background: var(--primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rankPulse 2s ease-in-out infinite;
    }

    @keyframes rankPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.15); }
    }

    .podium-card.first .podium-rank {
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-size: 4em;
    }

    .podium-medal {
        font-size: 3em;
        margin-bottom: 20px;
        animation: medalFloat 3s ease-in-out infinite;
        display: inline-block;
    }

    @keyframes medalFloat {
        0%, 100% { transform: rotateY(0deg) translateY(0px); }
        25% { transform: rotateY(90deg) translateY(-10px); }
        50% { transform: rotateY(180deg) translateY(0px); }
        75% { transform: rotateY(270deg) translateY(-10px); }
    }

    .podium-card:hover .podium-medal {
        animation: medalSpin 1s ease-in-out infinite;
    }

    @keyframes medalSpin {
        0% { transform: rotateY(0deg) scale(1); }
        50% { transform: rotateY(180deg) scale(1.3); }
        100% { transform: rotateY(360deg) scale(1); }
    }

    .podium-name {
        font-size: 1.5em;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .podium-points {
        font-size: 2.5em;
        font-weight: 800;
        background: var(--primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* LAST PLACE SHAME SECTION */
    .last-place-section {
        margin: 60px 0;
        padding: 40px;
        background: linear-gradient(135deg, rgba(250, 112, 154, 0.15), rgba(255, 107, 107, 0.15));
        border: 3px dashed rgba(250, 112, 154, 0.5);
        border-radius: var(--border-radius-lg);
        position: relative;
        overflow: hidden;
        animation: shameGlow 3s ease-in-out infinite;
    }

    @keyframes shameGlow {
        0%, 100% { box-shadow: 0 0 20px rgba(250, 112, 154, 0.3); }
        50% { box-shadow: 0 0 40px rgba(250, 112, 154, 0.6); }
    }

    .last-place-section::before {
        content: "‚ö†Ô∏è";
        position: absolute;
        font-size: 10em;
        opacity: 0.05;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-15deg);
        animation: warningPulse 2s ease-in-out infinite;
    }

    @keyframes warningPulse {
        0%, 100% { transform: translate(-50%, -50%) rotate(-15deg) scale(1); }
        50% { transform: translate(-50%, -50%) rotate(15deg) scale(1.1); }
    }

    .last-place-title {
        text-align: center;
        font-size: 2.5em;
        font-weight: 800;
        color: #ff6b6b;
        margin-bottom: 30px;
        text-transform: uppercase;
        letter-spacing: 3px;
        animation: shameShake 1s ease-in-out infinite;
        text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
    }

    @keyframes shameShake {
        0%, 100% { transform: translateX(0) rotate(0deg); }
        25% { transform: translateX(-5px) rotate(-2deg); }
        75% { transform: translateX(5px) rotate(2deg); }
    }

    .last-place-card {
        background: var(--bg-glass);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(250, 112, 154, 0.4);
        border-radius: var(--border-radius-lg);
        padding: 30px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        animation: lastPlaceWobble 3s ease-in-out infinite;
        cursor: pointer;
    }

    @keyframes lastPlaceWobble {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        25% { transform: translateY(-5px) rotate(-1deg); }
        50% { transform: translateY(0px) rotate(1deg); }
        75% { transform: translateY(-3px) rotate(-0.5deg); }
    }

    .last-place-card:hover {
        transform: scale(1.05) rotate(2deg);
        border-color: rgba(255, 107, 107, 0.8);
        box-shadow: 0 20px 50px rgba(255, 107, 107, 0.4);
        animation: shameIntensify 0.5s ease-in-out infinite;
    }

    @keyframes shameIntensify {
        0%, 100% { transform: scale(1.05) rotate(2deg); }
        50% { transform: scale(1.08) rotate(-2deg); }
    }

    .last-place-info {
        display: flex;
        align-items: center;
        gap: 25px;
    }

    .last-place-icon {
        font-size: 4em;
        animation: sadFaceRotate 4s ease-in-out infinite;
    }

    @keyframes sadFaceRotate {
        0%, 100% { transform: rotate(0deg); }
        25% { transform: rotate(-10deg); }
        75% { transform: rotate(10deg); }
    }

    .last-place-details {
        text-align: left;
    }

    .last-place-rank {
        font-size: 1.2em;
        color: #ff6b6b;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .last-place-name {
        font-size: 2em;
        font-weight: 800;
        color: var(--text-primary);
        margin: 10px 0;
    }

    .last-place-subtitle {
        font-size: 1em;
        color: var(--text-muted);
        font-style: italic;
    }

    .last-place-points {
        font-size: 3em;
        font-weight: 900;
        color: #ff6b6b;
        text-align: right;
        animation: pointsBlink 2s ease-in-out infinite;
    }

    @keyframes pointsBlink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* MIDDLE RANKINGS */
    .remaining-players {
        margin-top: 40px;
    }

    .remaining-title {
        font-size: 2em;
        font-weight: 700;
        color: var(--text-secondary);
        margin-bottom: 25px;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .player-card {
        background: var(--bg-glass);
        backdrop-filter: blur(15px);
        border: 2px solid var(--border-glass);
        border-radius: var(--border-radius-lg);
        padding: 25px 30px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        animation: slideInLeft 0.6s ease-out;
        animation-fill-mode: both;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .player-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.6s ease;
    }

    .player-card:hover::before {
        left: 100%;
    }

    @keyframes slideInLeft {
        from { transform: translateX(-100px) rotate(-5deg); opacity: 0; }
        to { transform: translateX(0) rotate(0deg); opacity: 1; }
    }

    .player-card:hover {
        transform: translateX(15px) scale(1.03);
        border-color: rgba(102, 126, 234, 0.6);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }

    .player-card:active {
        animation: cardPunch 0.3s ease;
    }

    @keyframes cardPunch {
        0%, 100% { transform: translateX(15px) scale(1.03); }
        50% { transform: translateX(20px) scale(1.08); }
    }

    .player-info {
        display: flex;
        align-items: center;
        gap: 25px;
    }

    .player-rank {
        font-size: 1.8em;
        font-weight: 800;
        color: var(--text-secondary);
        min-width: 50px;
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .player-card:hover .player-rank {
        transform: rotate(360deg) scale(1.2);
        background: var(--primary);
        color: var(--text-primary);
    }

    .player-name {
        font-size: 1.5em;
        font-weight: 700;
        color: var(--text-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .player-points {
        font-size: 2.2em;
        font-weight: 800;
        background: var(--primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        min-width: 100px;
        text-align: right;
        transition: all 0.4s ease;
    }

    .player-card:hover .player-points {
        transform: scale(1.2);
        filter: brightness(1.3);
    }

    .empty-state {
        text-align: center;
        padding: 100px 40px;
        color: var(--text-secondary);
    }

    .empty-state i {
        font-size: 5em;
        margin-bottom: 25px;
        opacity: 0.5;
        animation: emptyBounce 2s ease-in-out infinite;
    }

    @keyframes emptyBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
    }

    .empty-state h3 {
        font-size: 2em;
        margin-bottom: 20px;
        color: var(--text-primary);
    }

    .empty-state p {
        font-size: 1.2em;
        line-height: 1.8;
        max-width: 500px;
        margin: 0 auto;
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .scoreboard-header {
            flex-direction: column;
            align-items: stretch;
        }

        .scoreboard-title {
            font-size: 2.5em;
            justify-content: center;
        }

        .podium-section {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .podium-card {
            transform: none !important;
            order: unset !important;
        }

        .player-card {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }

        .player-info {
            flex-direction: column;
            gap: 15px;
        }

        .last-place-card {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }

        .last-place-info {
            flex-direction: column;
        }
    }

    /* Animation delays for staggered entrance */
    .player-card:nth-child(1) { animation-delay: 0.1s; }
    .player-card:nth-child(2) { animation-delay: 0.2s; }
    .player-card:nth-child(3) { animation-delay: 0.3s; }
    .player-card:nth-child(4) { animation-delay: 0.4s; }
    .player-card:nth-child(5) { animation-delay: 0.5s; }
    .player-card:nth-child(n+6) { animation-delay: 0.6s; }
</style>

<div class="card">
    <div class="scoreboard-header">
        <h2 class="scoreboard-title">
            <i class="fas fa-trophy trophy-icon"></i>
            LEADERBOARD
        </h2>
        <form action="{{ url_for('scoreboard') }}" class="filter-section" method="GET">
            <label for="pclass">
                <i class="fas fa-filter"></i>
                Filter:
            </label>
            <select id="pclass" name="pclass" onchange="this.form.submit()">
                <option if selected_pclass== value="combined" {%
                'combined' %}selected{% endif %}>üèÜ Combined</option>
                {% for pclass in pclasses %}
                <option %} %}selected{% endif if pclass selected_pclass== value="{{ pclass }}" {%>{{
                    pclass|capitalize }}
                </option>
                {% endfor %}
            </select>
        </form>
    </div>

    <div class="leaderboard-container">
        {% if scoreboard_data %}
        <!-- TOP 3 PODIUM -->
        {% if scoreboard_data|length >= 3 %}
        <div class="podium-section">
            {% for entry in scoreboard_data[:3] %}
            <div class="podium-card {{ 'first' if loop.index == 1 else ('second' if loop.index == 2 else 'third') }}">
                <div class="podium-medal">
                    {% if loop.index == 1 %}ü•á
                    {% elif loop.index == 2 %}ü•à
                    {% else %}ü•â
                    {% endif %}
                </div>
                <div class="podium-rank">{{ loop.index }}</div>
                <div class="podium-name">{{ entry.name }}</div>
                <div class="podium-points">
                    {% if selected_pclass == 'combined' %}
                    {{ entry.combined }}
                    {% else %}
                    {{ entry.points_by_class.get(selected_pclass, 0) }}
                    {% endif %}
                    <small style="font-size: 0.4em; color: var(--text-secondary); display: block; margin-top: 5px;">POINTS</small>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- LAST PLACE SHAME SECTION -->
        {% if scoreboard_data|length > 3 %}
        {% set last_entry = scoreboard_data[-1] %}
        <div class="last-place-section">
            <div class="last-place-title">
                üíÄ HALL OF SHAME üíÄ
            </div>
            <div class="last-place-card">
                <div class="last-place-info">
                    <div class="last-place-icon">üò≠</div>
                    <div class="last-place-details">
                        <div class="last-place-rank">LAST PLACE</div>
                        <div class="last-place-name">{{ last_entry.name }}</div>
                        <div class="last-place-subtitle">"Better luck next time..."</div>
                    </div>
                </div>
                <div class="last-place-points">
                    {% if selected_pclass == 'combined' %}
                    {{ last_entry.combined }}
                    {% else %}
                    {{ last_entry.points_by_class.get(selected_pclass, 0) }}
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        <!-- MIDDLE RANKINGS -->
        {% if scoreboard_data|length > 4 %}
        <div class="remaining-players">
            <h3 class="remaining-title">
                <i class="fas fa-list-ol"></i>
                THE MIDDLE GROUND
            </h3>
            {% for entry in scoreboard_data[3:-1] %}
            <div class="player-card">
                <div class="player-info">
                    <div class="player-rank">{{ loop.index + 3 }}</div>
                    <div class="player-name">{{ entry.name }}</div>
                </div>
                <div class="player-points">
                    {% if selected_pclass == 'combined' %}
                    {{ entry.combined }}
                    {% else %}
                    {{ entry.points_by_class.get(selected_pclass, 0) }}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% elif scoreboard_data|length == 4 %}
        <div class="remaining-players">
            <h3 class="remaining-title">
                <i class="fas fa-list-ol"></i>
                THE MIDDLE GROUND
            </h3>
            <div class="player-card">
                <div class="player-info">
                    <div class="player-rank">4</div>
                    <div class="player-name">{{ scoreboard_data[3].name }}</div>
                </div>
                <div class="player-points">
                    {% if selected_pclass == 'combined' %}
                    {{ scoreboard_data[3].combined }}
                    {% else %}
                    {{ scoreboard_data[3].points_by_class.get(selected_pclass, 0) }}
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        {% else %}
        <div class="empty-state">
            <i class="fas fa-chart-line"></i>
            <h3>No Data Available</h3>
            <p>The leaderboard is empty! Start by adding people and awarding points in the
                Management and People sections.</p>
        </div>
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add confetti effect on first place hover
        const firstPlaceCard = document.querySelector('.podium-card.first');
        if (firstPlaceCard) {
            firstPlaceCard.addEventListener('mouseenter', function() {
                createConfetti(this);
            });
        }

        // Add crying effect on last place hover
        const lastPlaceCard = document.querySelector('.last-place-card');
        if (lastPlaceCard) {
            lastPlaceCard.addEventListener('mouseenter', function() {
                createTears(this);
            });
        }

        // Animate numbers counting up
        const pointElements = document.querySelectorAll('.podium-points, .player-points, .last-place-points');
        pointElements.forEach(element => {
            const text = element.textContent.trim();
            const match = text.match(/-?\d+/);
            if (match) {
                const finalValue = parseInt(match[0]);
                if (!isNaN(finalValue)) {
                    animateNumber(element, 0, finalValue, 1500);
                }
            }
        });

        function animateNumber(element, start, end, duration) {
            const startTime = performance.now();
            const originalHTML = element.innerHTML;
            
            function updateNumber(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const currentValue = Math.floor(start + (end - start) * easeOutQuart);
                
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = originalHTML;
                const textNode = tempDiv.childNodes[0];
                if (textNode && textNode.nodeType === Node.TEXT_NODE) {
                    element.innerHTML = originalHTML.replace(/(-?\d+)/, currentValue);
                } else {
                    element.innerHTML = originalHTML.replace(/(-?\d+)/, currentValue);
                }
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                }
            }
            
            requestAnimationFrame(updateNumber);
        }

        function createConfetti(element) {
            const emojis = ['üéâ', 'üéä', '‚ú®', '‚≠ê', 'üåü', 'üí´'];
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    confetti.style.position = 'fixed';
                    confetti.style.left = element.getBoundingClientRect().left + Math.random() * element.offsetWidth + 'px';
                    confetti.style.top = element.getBoundingClientRect().top + 'px';
                    confetti.style.fontSize = '2em';
                    confetti.style.pointerEvents = 'none';
                    confetti.style.zIndex = '9999';
                    confetti.style.transition = 'all 2s ease-out';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.style.transform = `translateY(${Math.random() * 500 - 250}px) translateX(${Math.random() * 400 - 200}px) rotate(${Math.random() * 720}deg)`;
                        confetti.style.opacity = '0';
                    }, 10);
                    
                    setTimeout(() => confetti.remove(), 2000);
                }, i * 50);
            }
        }

        function createTears(element) {
            const tears = ['üíß', 'üò¢', 'üò≠'];
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const tear = document.createElement('div');
                    tear.textContent = tears[Math.floor(Math.random() * tears.length)];
                    tear.style.position = 'fixed';
                    tear.style.left = element.getBoundingClientRect().left + Math.random() * element.offsetWidth + 'px';
                    tear.style.top = element.getBoundingClientRect().top + 'px';
                    tear.style.fontSize = '1.5em';
                    tear.style.pointerEvents = 'none';
                    tear.style.zIndex = '9999';
                    tear.style.transition = 'all 1.5s ease-in';
                    document.body.appendChild(tear);
                    
                    setTimeout(() => {
                        tear.style.transform = `translateY(300px)`;
                        tear.style.opacity = '0';
                    }, 10);
                    
                    setTimeout(() => tear.remove(), 1500);
                }, i * 100);
            }
        }

        // Add sound effects on hover (visual representation)
        const allCards = document.querySelectorAll('.podium-card, .player-card, .last-place-card');
        allCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.filter = 'brightness(1.2)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.filter = 'brightness(1)';
            });
        });
    });
</script>
{% endblock %}
